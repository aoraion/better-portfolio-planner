<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Better Portfolio Planner | TBT</title>
    <style>
        :root {
            --teal: #0DCAB1;
            --teal-dark: #0aa896;
            --teal-light: #14e0c5;
            --bg-dark: #0a0a0f;
            --bg-card: #12121a;
            --bg-card-hover: #1a1a25;
            --text-primary: #ffffff;
            --text-secondary: #a0a0b0;
            --text-muted: #6a6a7a;
            --positive: #00d97e;
            --negative: #ff4757;
            --warning: #ffc107;
            --border: #2a2a35;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-dark) 100%);
            border-bottom: 1px solid var(--border);
            padding: 20px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-section img {
            height: 50px;
            width: auto;
        }

        .logo-text h1 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--teal);
        }

        .logo-text p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .last-updated {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        /* Hero Section */
        .hero {
            padding: 60px 0 40px;
            text-align: center;
            background: linear-gradient(180deg, var(--bg-card) 0%, var(--bg-dark) 100%);
        }

        .hero h2 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--text-primary);
        }

        .hero h2 span {
            color: var(--teal);
        }

        .hero p {
            font-size: 1.1rem;
            color: var(--text-secondary);
            max-width: 700px;
            margin: 0 auto 30px;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            border-color: var(--teal);
            transform: translateY(-3px);
        }

        .stat-card .number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--teal);
            margin-bottom: 5px;
        }

        .stat-card .negative-stat {
            color: var(--negative);
        }

        .stat-card .label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* New Listings Section */
        .new-listings-section {
            background: var(--bg-card);
            border: 2px solid var(--teal);
            border-radius: 16px;
            padding: 40px;
            margin: 40px 0;
        }

        .new-listings-section h3 {
            font-size: 1.8rem;
            color: var(--teal);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .new-listings-section h3::before {
            content: "üöÄ";
        }

        .thesis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 25px;
        }

        .thesis-card {
            background: var(--bg-dark);
            border-radius: 12px;
            padding: 25px;
            border-left: 4px solid var(--teal);
        }

        .thesis-card h4 {
            color: var(--teal-light);
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .thesis-card p {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        .thesis-highlight {
            font-size: 1.1rem;
            color: var(--text-primary);
            background: rgba(13, 202, 177, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
        }

        .thesis-highlight strong {
            color: var(--teal);
        }

        /* Chart Section */
        .chart-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 30px;
            margin: 40px 0;
        }

        .chart-section h3 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--text-primary);
        }

        .chart-container {
            position: relative;
            height: 400px;
            width: 100%;
        }

        #degradationChart {
            width: 100%;
            height: 100%;
        }

        .chart-legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .legend-dot.improved {
            background: var(--positive);
        }

        .legend-dot.degraded {
            background: var(--negative);
        }

        .legend-dot.new {
            background: var(--teal);
        }

        /* Filters */
        .filters-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .filters-row {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .filter-group label {
            font-size: 0.8rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .filter-group input,
        .filter-group select {
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 10px 15px;
            color: var(--text-primary);
            font-size: 0.9rem;
            min-width: 150px;
        }

        .filter-group input:focus,
        .filter-group select:focus {
            outline: none;
            border-color: var(--teal);
        }

        .filter-toggle {
            display: flex;
            gap: 10px;
            margin-left: auto;
        }

        .toggle-btn {
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 10px 20px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .toggle-btn:hover {
            border-color: var(--teal);
            color: var(--text-primary);
        }

        .toggle-btn.active {
            background: var(--teal);
            border-color: var(--teal);
            color: var(--bg-dark);
        }

        /* Table */
        .table-container {
            overflow-x: auto;
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--bg-card);
        }

        th {
            background: var(--bg-dark);
            color: var(--text-secondary);
            font-weight: 600;
            text-align: left;
            padding: 15px 12px;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 2px solid var(--border);
            cursor: pointer;
            transition: color 0.3s ease;
            white-space: nowrap;
        }

        th:hover {
            color: var(--teal);
        }

        th.sorted-asc::after {
            content: " ‚ñ≤";
            color: var(--teal);
        }

        th.sorted-desc::after {
            content: " ‚ñº";
            color: var(--teal);
        }

        td {
            padding: 15px 12px;
            border-bottom: 1px solid var(--border);
            font-size: 0.9rem;
        }

        tr:hover {
            background: var(--bg-card-hover);
        }

        .coin-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .coin-symbol {
            font-weight: 600;
            color: var(--text-primary);
        }

        .coin-name {
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        .new-badge {
            background: var(--teal);
            color: var(--bg-dark);
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
        }

        .positive {
            color: var(--positive);
        }

        .negative {
            color: var(--negative);
        }

        .neutral {
            color: var(--text-muted);
        }

        .notes-cell {
            max-width: 250px;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* Footer */
        footer {
            background: var(--bg-card);
            border-top: 1px solid var(--border);
            padding: 40px 0;
            margin-top: 60px;
            text-align: center;
        }

        footer p {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        footer a {
            color: var(--teal);
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .header-content {
                justify-content: center;
                text-align: center;
            }

            .logo-section {
                flex-direction: column;
            }

            .hero h2 {
                font-size: 1.8rem;
            }

            .hero p {
                font-size: 1rem;
                padding: 0 15px;
            }

            .new-listings-section {
                padding: 25px 20px;
            }

            .new-listings-section h3 {
                font-size: 1.4rem;
            }

            .thesis-grid {
                grid-template-columns: 1fr;
            }

            .filters-row {
                flex-direction: column;
            }

            .filter-group {
                width: 100%;
            }

            .filter-group input,
            .filter-group select {
                width: 100%;
            }

            .filter-toggle {
                margin-left: 0;
                width: 100%;
                justify-content: center;
            }

            .chart-container {
                height: 300px;
            }

            th, td {
                padding: 10px 8px;
                font-size: 0.8rem;
            }

            .notes-cell {
                display: none;
            }
        }

        /* Bar chart styles */
        .bar-chart {
            display: flex;
            flex-direction: column;
            gap: 8px;
            max-height: 400px;
            overflow-y: auto;
        }

        .bar-row {
            display: flex;
            align-items: center;
            gap: 10px;
            min-height: 30px;
        }

        .bar-label {
            min-width: 60px;
            font-size: 0.8rem;
            color: var(--text-secondary);
            text-align: right;
        }

        .bar-container {
            flex: 1;
            display: flex;
            align-items: center;
            position: relative;
        }

        .bar {
            height: 24px;
            border-radius: 4px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 8px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .bar.improved {
            background: linear-gradient(90deg, var(--positive) 0%, #00b368 100%);
            color: var(--bg-dark);
        }

        .bar.degraded {
            background: linear-gradient(90deg, #cc3a47 0%, var(--negative) 100%);
            color: white;
        }

        .bar.new-coin {
            background: linear-gradient(90deg, var(--teal-dark) 0%, var(--teal) 100%);
            color: var(--bg-dark);
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo-section">
                    <img src="tbt-logo.png" alt="The Better Traders">
                    <div class="logo-text">
                        <h1>The Better Portfolio Planner</h1>
                        <p>Data-driven crypto cycle analysis</p>
                    </div>
                </div>
                <span class="last-updated">Last updated: <span id="lastUpdated"></span></span>
            </div>
        </div>
    </header>

    <section class="hero">
        <div class="container">
            <h2>Why <span>95%</span> of Coins Underperform Each Cycle</h2>
            <p>Historical data shows that most cryptocurrencies experience significant cycle degradation. New listings often outperform established coins in their first bull run.</p>
        </div>
    </section>

    <main class="container">
        <div class="stats-grid">
            <div class="stat-card">
                <div class="number" id="totalCoins">0</div>
                <div class="label">Coins Analyzed</div>
            </div>
            <div class="stat-card">
                <div class="number negative-stat" id="degradationRate">0%</div>
                <div class="label">Coins That Degraded</div>
            </div>
            <div class="stat-card">
                <div class="number negative-stat" id="avgDegradation">0%</div>
                <div class="label">Average Cycle Degradation</div>
            </div>
            <div class="stat-card">
                <div class="number" id="coinsImproved">0</div>
                <div class="label">Coins That Improved</div>
            </div>
        </div>

        <section class="new-listings-section">
            <h3>The New Listings Advantage</h3>
            <p style="color: var(--text-secondary); font-size: 1rem; max-width: 800px;">
                The data reveals a powerful pattern: cryptocurrencies tend to have their biggest percentage gains during their first bull market cycle. After that initial explosion, most coins experience significant "cycle degradation" ‚Äî delivering smaller returns in subsequent cycles.
            </p>
            
            <div class="thesis-grid">
                <div class="thesis-card">
                    <h4>üìà First Cycle Advantage</h4>
                    <p>New coins often deliver 10x-100x gains in their first bull run. Examples: SOL did 51,683% in 2018-21, then only 2,915% in 2023-25 (-94% degradation).</p>
                </div>
                <div class="thesis-card">
                    <h4>üìâ Cycle Degradation Reality</h4>
                    <p>95% of coins with two-cycle data show degradation. The average drop in run-up percentage is -81%. Only 2 coins (ZEC +38%, INJ +9%) improved cycle-over-cycle.</p>
                </div>
                <div class="thesis-card">
                    <h4>üéØ Strategic Implication</h4>
                    <p>Consider focusing on quality new listings early in a cycle, rather than holding established coins expecting similar returns. The first rally is usually the biggest.</p>
                </div>
                <div class="thesis-card">
                    <h4>‚ö†Ô∏è The Meme Warning</h4>
                    <p>Meme coins like DOGE (-98%), SHIB (-100%) had historic first cycles. Their subsequent performance suggests the narrative has peaked. Be cautious of "sequel" gains.</p>
                </div>
            </div>

            <div class="thesis-highlight">
                <strong>Key Insight:</strong> Bitcoin degraded -68%, Ethereum -95%, Solana -94% cycle-over-cycle. Even the best projects rarely repeat their initial explosive gains.
            </div>
        </section>

        <section class="chart-section">
            <h3>Cycle Degradation Visualization</h3>
            <p style="color: var(--text-secondary); margin-bottom: 20px;">Comparing 2018-2021 vs 2023-2025 cycle run-up percentages for coins with historical data</p>
            <div class="chart-container">
                <div id="degradationChart" class="bar-chart"></div>
            </div>
            <div class="chart-legend">
                <div class="legend-item">
                    <div class="legend-dot improved"></div>
                    <span>Improved (rare!)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-dot degraded"></div>
                    <span>Degraded</span>
                </div>
                <div class="legend-item">
                    <div class="legend-dot new"></div>
                    <span>New Listing (no prior cycle)</span>
                </div>
            </div>
        </section>

        <section class="filters-section">
            <div class="filters-row">
                <div class="filter-group">
                    <label>Search</label>
                    <input type="text" id="searchInput" placeholder="BTC, ETH...">
                </div>
                <div class="filter-group">
                    <label>Cycle Change</label>
                    <select id="cycleFilter">
                        <option value="all">All Coins</option>
                        <option value="improved">Improved Only</option>
                        <option value="degraded">Degraded Only</option>
                        <option value="new">New Listings</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Min ROI %</label>
                    <input type="number" id="minRoi" placeholder="-100">
                </div>
                <div class="filter-toggle">
                    <button class="toggle-btn active" data-show="all">All</button>
                    <button class="toggle-btn" data-show="established">Established</button>
                    <button class="toggle-btn" data-show="new">New Only</button>
                </div>
            </div>
        </section>

        <div class="table-container">
            <table id="coinTable">
                <thead>
                    <tr>
                        <th data-sort="rank">#</th>
                        <th data-sort="symbol">Coin</th>
                        <th data-sort="roi_2025">ROI 2025 %</th>
                        <th data-sort="runup_23_25">23-25 Run-up %</th>
                        <th data-sort="runup_18_21">18-21 Run-up %</th>
                        <th data-sort="cycle_change">Cycle Change %</th>
                        <th data-sort="proj_bearish">Bear Proj.</th>
                        <th data-sort="proj_bullish">Bull Proj.</th>
                        <th>Notes</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                </tbody>
            </table>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>Built with üíö by <a href="https://thebettertraders.com" target="_blank">The Better Traders</a></p>
            <p style="margin-top: 10px;">Data sources: CoinGecko, CryptoCompare, Historical Analysis</p>
            <p style="margin-top: 15px; font-size: 0.8rem;">
                ‚ö†Ô∏è This is educational content only. Past performance does not guarantee future results. Always do your own research.
            </p>
        </div>
    </footer>

    <script>
        let coinData = [];
        let currentSort = { column: 'rank', ascending: true };

        // Load data
        async function loadData() {
            try {
                const response = await fetch('data.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                coinData = data.coins;
                
                document.getElementById('lastUpdated').textContent = data.lastUpdated;
                document.getElementById('totalCoins').textContent = data.stats.total_coins;
                document.getElementById('degradationRate').textContent = data.stats.degradation_rate + '%';
                document.getElementById('avgDegradation').textContent = data.stats.avg_cycle_degradation + '%';
                document.getElementById('coinsImproved').textContent = data.stats.coins_that_improved;
                
                renderTable(coinData);
                renderChart(coinData);
            } catch (error) {
                console.error('Error loading data:', error);
            }
        }

        // Format number
        function formatNumber(num, decimals = 2) {
            if (num === null || num === undefined) return 'N/A';
            // Ensure num is a number
            const n = Number(num);
            if (isNaN(n)) return 'N/A';
            if (Math.abs(n) >= 1000000) {
                return (n / 1000000).toFixed(1) + 'M';
            }
            if (Math.abs(n) >= 1000) {
                return (n / 1000).toFixed(1) + 'K';
            }
            return n.toFixed(decimals);
        }

        // Get class based on value
        function getValueClass(value) {
            if (value === null || value === undefined) return 'neutral';
            return value >= 0 ? 'positive' : 'negative';
        }

        // Render table
        function renderTable(data) {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';
            
            data.forEach(coin => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${coin.rank}</td>
                    <td>
                        <div class="coin-info">
                            <div>
                                <span class="coin-symbol">${coin.symbol}</span>
                                ${coin.is_new ? '<span class="new-badge">NEW</span>' : ''}
                                <br><span class="coin-name">${coin.name}</span>
                            </div>
                        </div>
                    </td>
                    <td class="${getValueClass(coin.roi_2025)}">${formatNumber(coin.roi_2025)}%</td>
                    <td class="positive">${formatNumber(coin.runup_23_25, 0)}%</td>
                    <td>${coin.runup_18_21 ? formatNumber(coin.runup_18_21, 0) + '%' : '<span class="neutral">N/A</span>'}</td>
                    <td class="${getValueClass(coin.cycle_change)}">${coin.cycle_change !== null ? formatNumber(coin.cycle_change, 0) + '%' : '<span class="neutral">N/A</span>'}</td>
                    <td>${formatNumber(coin.proj_bearish, 0)}%</td>
                    <td>${formatNumber(coin.proj_bullish, 0)}%</td>
                    <td class="notes-cell">${coin.notes || ''}</td>
                `;
                tbody.appendChild(row);
            });
        }

        // Render chart
        function renderChart(data) {
            const chartContainer = document.getElementById('degradationChart');
            chartContainer.innerHTML = '';
            
            // Filter coins with cycle data and sort by degradation
            const chartData = data
                .filter(c => c.cycle_change !== null || c.is_new)
                .sort((a, b) => {
                    if (a.cycle_change === null) return 1;
                    if (b.cycle_change === null) return -1;
                    return b.cycle_change - a.cycle_change;
                })
                .slice(0, 50);
            
            const maxPositive = Math.max(...chartData.filter(c => c.cycle_change > 0).map(c => c.cycle_change), 50);
            const maxNegative = Math.abs(Math.min(...chartData.filter(c => c.cycle_change !== null && c.cycle_change < 0).map(c => c.cycle_change), -100));
            
            chartData.forEach(coin => {
                const row = document.createElement('div');
                row.className = 'bar-row';
                
                let barClass = 'new-coin';
                let barWidth = 30;
                let barValue = 'NEW';
                
                if (coin.cycle_change !== null) {
                    if (coin.cycle_change >= 0) {
                        barClass = 'improved';
                        barWidth = Math.max(10, (coin.cycle_change / maxPositive) * 100);
                        barValue = '+' + coin.cycle_change + '%';
                    } else {
                        barClass = 'degraded';
                        barWidth = Math.max(10, (Math.abs(coin.cycle_change) / maxNegative) * 100);
                        barValue = coin.cycle_change + '%';
                    }
                }
                
                row.innerHTML = `
                    <div class="bar-label">${coin.symbol}</div>
                    <div class="bar-container">
                        <div class="bar ${barClass}" style="width: ${barWidth}%">${barValue}</div>
                    </div>
                `;
                chartContainer.appendChild(row);
            });
        }

        // Filter and search
        function filterData() {
            const search = document.getElementById('searchInput').value.toLowerCase();
            const cycleFilter = document.getElementById('cycleFilter').value;
            const minRoi = parseFloat(document.getElementById('minRoi').value) || -Infinity;
            const activeToggle = document.querySelector('.toggle-btn.active').dataset.show;
            
            let filtered = coinData.filter(coin => {
                const matchesSearch = coin.symbol.toLowerCase().includes(search) || 
                                     coin.name.toLowerCase().includes(search);
                
                const matchesRoi = coin.roi_2025 === null || coin.roi_2025 >= minRoi;
                
                let matchesCycle = true;
                if (cycleFilter === 'improved') {
                    matchesCycle = coin.cycle_change !== null && coin.cycle_change > 0;
                } else if (cycleFilter === 'degraded') {
                    matchesCycle = coin.cycle_change !== null && coin.cycle_change < 0;
                } else if (cycleFilter === 'new') {
                    matchesCycle = coin.is_new;
                }
                
                let matchesToggle = true;
                if (activeToggle === 'established') {
                    matchesToggle = !coin.is_new;
                } else if (activeToggle === 'new') {
                    matchesToggle = coin.is_new;
                }
                
                return matchesSearch && matchesRoi && matchesCycle && matchesToggle;
            });
            
            renderTable(sortData(filtered));
        }

        // Sort data
        function sortData(data) {
            return [...data].sort((a, b) => {
                let aVal = a[currentSort.column];
                let bVal = b[currentSort.column];
                
                // Handle null values
                if (aVal === null) aVal = currentSort.ascending ? Infinity : -Infinity;
                if (bVal === null) bVal = currentSort.ascending ? Infinity : -Infinity;
                
                // Handle rank (might be string like "NEW")
                if (currentSort.column === 'rank') {
                    aVal = typeof aVal === 'number' ? aVal : 999;
                    bVal = typeof bVal === 'number' ? bVal : 999;
                }
                
                if (aVal < bVal) return currentSort.ascending ? -1 : 1;
                if (aVal > bVal) return currentSort.ascending ? 1 : -1;
                return 0;
            });
        }

        // Event listeners
        document.getElementById('searchInput').addEventListener('input', filterData);
        document.getElementById('cycleFilter').addEventListener('change', filterData);
        document.getElementById('minRoi').addEventListener('input', filterData);

        document.querySelectorAll('.toggle-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.toggle-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                filterData();
            });
        });

        document.querySelectorAll('th[data-sort]').forEach(th => {
            th.addEventListener('click', function() {
                const column = this.dataset.sort;
                
                // Remove sort classes from all headers
                document.querySelectorAll('th').forEach(h => {
                    h.classList.remove('sorted-asc', 'sorted-desc');
                });
                
                // Toggle sort direction
                if (currentSort.column === column) {
                    currentSort.ascending = !currentSort.ascending;
                } else {
                    currentSort.column = column;
                    currentSort.ascending = true;
                }
                
                // Add sort class
                this.classList.add(currentSort.ascending ? 'sorted-asc' : 'sorted-desc');
                
                filterData();
            });
        });

        // Initialize
        loadData();
    </script>
</body>
</html>
